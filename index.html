<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>単語れんしゅう</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='256' height='256'><rect width='256' height='256' fill='%23007aff'/><text x='50%' y='55%' dominant-baseline='middle' text-anchor='middle' font-family='Arial' font-size='120' fill='white'>単</text></svg>">
  <style>
    :root{--bg:#0f172a;--card:#111827;--txt:#e5e7eb;--muted:#9ca3af;--acc:#60a5fa;--good:#10b981;--again:#ef4444}
    html,body{height:100%}
    body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:var(--bg); color:var(--txt); -webkit-font-smoothing:antialiased}
    .wrap{display:grid; grid-template-rows:auto 1fr auto; height:100%;}
    header,footer{padding:10px 12px; background:#0b1023cc; backdrop-filter: blur(8px); position:sticky; z-index:2}
    header{top:0; display:flex; gap:8px; align-items:center; justify-content:space-between}
    footer{bottom:0; display:flex; gap:10px; justify-content:space-between; align-items:center}
    .btn{appearance:none; border:1px solid #334155; background:#0b1228; color:var(--txt); padding:10px 14px; border-radius:14px; font-size:16px}
    .btn.primary{border-color:#1d4ed8}
    .btn.good{border-color:var(--good)}
    .btn.again{border-color:var(--again)}
    .btn:active{transform:scale(0.98)}
    .stack{display:flex; gap:8px; flex-wrap:wrap}
    .content{display:grid; place-items:center; padding:12px}
    .card{width:100%; max-width:720px; aspect-ratio:3/4; border-radius:28px; background:linear-gradient(180deg,#0b1228,#0b0f1f); border:1px solid #233; box-shadow:0 10px 30px #0008; display:grid; grid-template-rows:1fr auto; overflow:hidden}
    .face{display:grid; place-items:center; padding:24px; text-align:center; font-size:42px; line-height:1.2}
    .hint{font-size:16px; color:var(--muted); margin-top:8px}
    .meta{display:flex; justify-content:space-between; align-items:center; font-size:14px; padding:10px 14px; color:var(--muted); border-top:1px solid #233}
    .pill{border:1px solid #334155; border-radius:999px; padding:4px 10px}
    .row{display:flex; gap:8px; align-items:center}
    dialog{border:1px solid #334155; border-radius:14px; background:#0b1023; color:var(--txt); width:min(720px,92vw)}
    textarea, input{width:100%; background:#0b1228; color:var(--txt); border:1px solid #334155; border-radius:12px; padding:10px; font-family:ui-monospace,monospace}
    label{font-size:14px; color:var(--muted)}
    .grid{display:grid; gap:10px}
    .grid.cols2{grid-template-columns:1fr 1fr}
    .kbd{font-family:ui-monospace,monospace; background:#111827; border:1px solid #334155; padding:2px 6px; border-radius:8px}
    .ghost{opacity:.5}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="row">
      <strong>単語れんしゅう</strong>
      <span class="pill" id="deckName">デフォルト</span>
    </div>
    <div class="stack">
      <button class="btn" id="btnLoad">デッキ読込</button>
      <button class="btn" id="btnExport">成績を保存</button>
      <button class="btn" id="btnImport">成績を読込</button>
      <button class="btn" id="btnReset">リセット</button>
      <label class="row"><input type="checkbox" id="ttsToggle"/> 音声</label>
    </div>
  </header>

  <main class="content">
    <div class="card" id="card">
      <div class="face" id="face">
        <div>
          <div id="front" aria-live="polite"></div>
          <div class="hint" id="hint"></div>
        </div>
      </div>
      <div class="meta">
        <div class="row">
          <span class="pill" id="count">0/0</span>
          <span class="pill" id="boxInfo">ボックス1</span>
        </div>
        <div class="row ghost">タップ: 裏返す • ⟵ もう一度 • ⟶ OK • ↑ 音声</div>
      </div>
    </div>
  </main>

  <footer>
    <button class="btn again" id="btnAgain">もう一度</button>
    <div class="row">
      <button class="btn" id="btnFlip">裏返す</button>
      <button class="btn" id="btnAudio">音声</button>
    </div>
    <button class="btn good" id="btnGood">OK</button>
  </footer>
</div>

<dialog id="loadDialog">
  <form method="dialog" class="grid">
    <h3>デッキを読込</h3>
    <label>JSONカードをペーストしてください（{front, back, hint?, audioText?}）</label>
    <textarea id="deckInput" rows="10" placeholder='[
  {"front":"dog","back":"いぬ","hint":"名詞"},
  {"front":"run","back":"はしる","hint":"動詞","audioText":"run"}
]'></textarea>
    <div class="grid cols2">
      <input id="deckTitle" placeholder="デッキ名" />
      <button class="btn primary" id="applyDeck">決定</button>
    </div>
  </form>
</dialog>

<dialog id="importDialog">
  <form method="dialog" class="grid">
    <h3>成績を読込</h3>
    <label>以前保存したデータをペーストしてください:</label>
    <textarea id="importText" rows="10"></textarea>
    <button class="btn primary" id="applyImport">読込</button>
  </form>
</dialog>

<script>
// JavaScript stays the same — only UI labels were localized to Japanese
</script>
</body>
</html>
